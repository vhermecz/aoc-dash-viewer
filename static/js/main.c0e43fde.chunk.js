(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),c=(a(80),a(32)),s=a(24),i=a.n(s),u=a(17),m=a(41),f=(a(82),a(57)),d=a.n(f),p=a(151),b=a(144),h=a(149),g=a(145),v=a(146),E=a(147),O=a(148),y=a(139),S=a(34),A=a.n(S),L=a(63),w=a(150),_=Object(y.a)((function(e){return{leanAutocomplete:{"&.MuiAutocomplete-hasPopupIcon.MuiAutocomplete-hasClearIcon .MuiAutocomplete-inputRoot":{paddingRight:4}}}}));var I=function(e){var t=e.value,a=e.onChange,n=e.options,o=e.labelGetter,l=e.valueGetter,s=Object(L.a)(e,["value","onChange","options","labelGetter","valueGetter"]),i=_();return void 0===l&&(l=function(e){return e}),r.a.createElement(w.a,{options:n,classes:{root:i.leanAutocomplete},getOptionLabel:function(){return o.apply(void 0,arguments)||""},closeIcon:"",popupIcon:"",value:[].concat(Object(c.a)(n.filter((function(e){return l(e)===t}))),[null])[0],onChange:function(e,t){return a(l(t))},renderInput:function(e){return r.a.createElement(h.a,Object.assign({},((t=e).inputProps.autoComplete="new-password",t),s));var t}})};function x(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var C={members:{}},j=Object(y.a)((function(e){return{vText:{height:140,whiteSpace:"nowrap",fontWeight:400,fontSize:"16px",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif","& div":{transform:"translate(25px, 51px) rotate(315deg)",width:30,"& span":{padding:"5px 10px 5px 0px"}}},vData:{padding:"8px",width:"52px",minWidth:"52px",maxWidth:"52px",overflow:"hidden"}}}));function k(e,t,a){if(t)return(0|t)-(new Date(e,11,1,6,0,0).getTime()/1e3+86400*(a-1))}function M(e){if(e)return function(e){var t=e<0?"-":"",a=(e=Math.abs(e))%60,n=Math.floor(e/60)%60,r=Math.floor(e/3600)%24,o=Math.floor(e/86400),l=0!==o,c=l||0!==r,s=c||0!==n;return t+(l?String(o)+"d":"")+(c?String(r).padStart(l?2:1,"0")+"h":"")+(l||!s?"":String(n).padStart(c?2:1,"0")+"m")+(c?"":String(a).padStart(s?2:1,"0")+"s")}(e)}function P(e,t,a){return D.apply(this,arguments)}function D(){return(D=Object(m.a)(i.a.mark((function e(t,a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("https://vhermecz-aoc-proxy.herokuapp.com/",null,{headers:{"x-stuff":JSON.stringify({year:t,dash:n,session:a})}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t,a){return R.apply(this,arguments)}function R(){return(R=Object(m.a)(i.a.mark((function e(t,a,n){var r,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="restapi-".concat(n,"-").concat(t),o=null;try{o=JSON.parse(localStorage.getItem("restapi-".concat(n,"-").concat(t)))}catch(c){}if(!(void 0!==o&&null!==o&&void 0!==o.timestamp&&Date.now()<o.timestamp+9e5)){e.next=6;break}return console.log("Serving from cache"),e.abrupt("return",o);case 6:return e.prev=6,e.next=9,P(t,a,n);case 9:l=e.sent,console.log(l),o={data:l.data||C,timestamp:Date.now()},console.log(o),localStorage.setItem(r,JSON.stringify(o)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),console.log("ERROR"),o={error:"Connection problem",data:C,timestamp:Date.now()};case 20:return e.abrupt("return",o);case 21:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}function G(e,t){return e<t?-1:e>t?1:0}var B=Object.freeze({API_LOCAL:{field:"local_score",label:"API Local Score",scoreMessage:"total local score as returned by the API",orderMessage:"completion time of 2nd star"},API_GLOBAL:{field:"global_score",label:"API Global Score",scoreMessage:"total global score as returned by the API",orderMessage:"completion time of 2nd star"},LOCAL_API:{field:"local_local_score",label:"Local Score",scoreMessage:"total local score as computed from timestamps",orderMessage:"completion time of 2nd star"},LOCAL_API_FIRST:{field:"local_local_score_first",label:"Local Score (1st star only)",scoreMessage:"total local score as computed from timestamps (only first star counts)",orderMessage:"completion time of 1st star"},LOCAL_DELTA:{field:"local_delta_score",label:"StarDelta Score",scoreMessage:"delta-time between first and second star (for late comers/risers)",orderMessage:"delta-times between stars"}});Object.keys(B).forEach((function(e){B[e].key=e}));function F(e,t,a,n){var r=((e.completion_day_level[t]||{})[a]||{}).get_star_ts;return void 0===r?n:r}function W(e,t,a){var n=F(e,t,1),r=F(e,t,2);return void 0===n||void 0===r?a:r-n}function N(e){var t=e.orderBy,a=e.scoreBy,n=e.timestamp;return r.a.createElement(p.a,null,r.a.createElement("b",null,"Scoring by "),a.scoreMessage,".",r.a.createElement("b",null," Ordering by "),null===t?"username":0===t?"score":a.orderMessage+" for day #".concat(t),"\xa0(Queried at ",new Date(n).toString(),")")}function J(e){return Object.values(e.members).forEach((function(e){e.name=e.name||"anon #".concat(e.id),e[B.LOCAL_API.field]=0,e[B.LOCAL_DELTA.field]=0})),A.a.range(1,26).forEach((function(t){var a=Object.values(e.members);[[B.LOCAL_API_FIRST,function(e){return F(e,t,1,1e20)}],[B.LOCAL_API,function(e){return F(e,t,2,1e20)}],[B.LOCAL_DELTA,function(e){return W(e,t,1e20)}]].forEach((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];a.sort((function(e,t){return G(r(e),r(t))})),a.forEach((function(e,t){1e20!==r(e)&&(e[n.field]+=a.length-t)}))}))})),e}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.minValue,n=t.maxValue;if((0|e)+""!==e)return!1;var r=0|e;return!(void 0!==a&&r<a)&&!(void 0!==n&&r>n)}var V=function(){var e=j(),t=r.a.useState(C),a=Object(u.a)(t,2),n=a[0],o=a[1],l=r.a.useState(null),s=Object(u.a)(l,2),f=s[0],d=s[1],y=r.a.useState(""),S=Object(u.a)(y,2),L=S[0],w=S[1],_=r.a.useState(""),P=Object(u.a)(_,2),D=P[0],R=P[1],V=r.a.useState(null),z=Object(u.a)(V,2),Y=z[0],q=z[1],H=r.a.useState(B.API_LOCAL),$=Object(u.a)(H,2),Q=$[0],K=$[1],X=r.a.useState([]),Z=Object(u.a)(X,2),ee=Z[0],te=Z[1],ae=r.a.useState(2020),ne=Object(u.a)(ae,2),re=ne[0],oe=ne[1];r.a.useEffect((function(){var e=new URL(window.location.href).searchParams;U(e.get("year"),{minValue:2015,maxValue:2021})&&oe(0|e.get("year")),e.get("dash")&&R(e.get("dash")),U(e.get("order"))&&q(e.get("order")),Object.keys(B).indexOf(e.get("score"))>-1&&K(B[e.get("score")]),void 0!==localStorage&&w(localStorage.getItem("sessionId")||"")}),[]),r.a.useEffect((function(){var e,t={year:re,order:void 0===Y?-1:Y,dash:D,score:Q.key};window.history.replaceState({},null,"?"+(e=t,A.a.map(e,(function(e,t){return x(t)+"="+x(e)})).join("&")))}),[re,D,Y,Q]),r.a.useEffect((function(){localStorage.setItem("sessionId",L)}),[L]),r.a.useEffect((function(){L&&D&&re&&function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(re,L,D);case 2:t=e.sent,d(t.timestamp),o(J(t.data));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[L,re,D]),r.a.useEffect((function(){if(n){var e=function(e,t){return G(e.name,t.name)};if(null!==Y)if(Y>0)if(Q===B.LOCAL_DELTA)e=function(e,t){return G(W(e,Y,1e20),W(t,Y,1e20))};else if(Q===B.LOCAL_API_FIRST)e=function(e,t){return G(F(e,Y,1,1e20),F(t,Y,1,1e20))};else{if(!([B.LOCAL_API,B.API_LOCAL,B.API_GLOBAL].indexOf(Q)>-1))throw"Fuck yah!";e=function(e,t){return G(F(e,Y,2,1e20),F(t,Y,2,1e20))}}else e=function(e,t){return G(-e[Q.field],-t[Q.field])};te(Object.values(n.members).sort(e).map((function(e){return e.id})))}}),[n,Y,Q]);var le=function(e){q(e===Y?null:e)},ce=Math.max.apply(Math,[0].concat(Object(c.a)(Object.values(n.members).map((function(e){return Object.keys(e.completion_day_level).length}))))),se=Object(c.a)(Array(ce)).map((function(e,t){return t+1})),ie=Q===B.LOCAL_DELTA;return function(){var e=[];return void 0===localStorage&&e.push("localStorage not supported"),e}().length>0?"Sorry your browser is lame":r.a.createElement(p.a,{p:2},r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:4},r.a.createElement(h.a,{fullWidth:!0,label:"Session ID",value:L,onChange:function(e){return w(e.target.value)}})),r.a.createElement(b.a,{item:!0,xs:1}),r.a.createElement(b.a,{item:!0,xs:1},r.a.createElement(I,{label:"Year",options:[2015,2016,2017,2018,2019,2020,2021],labelGetter:function(e){return e+""},valueGetter:function(e){return e},value:re,onChange:oe})),r.a.createElement(b.a,{item:!0,xs:3},r.a.createElement(I,{label:"Score",options:Object.values(B),labelGetter:function(e){return e.label},valueGetter:function(e){return e},value:Q,onChange:K})),r.a.createElement(b.a,{item:!0,xs:3},r.a.createElement(h.a,{fullWidth:!0,label:"Dashboard ID",value:D,onChange:function(e){return R(e.target.value)}})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(N,{orderBy:Y,scoreBy:Q,timestamp:f}))),function(e){return(e||"").match(/^[a-f0-9]{96}$/)}(L)?n?r.a.createElement(g.a,{style:{width:"auto"}},r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement(O.a,null,"AOC"),ee.map((function(t){return r.a.createElement(O.a,{class:e.vText},r.a.createElement(p.a,null,r.a.createElement("span",null,n.members[t].name)))}))),r.a.createElement(E.a,null,r.a.createElement(O.a,{onClick:function(){return le(0)}},0===Y?r.a.createElement("b",null,"Pts"):"Pts"),ee.map((function(e){var t=n.members[e][Q.field];return r.a.createElement(O.a,null,t)}))),se.map((function(t){return r.a.createElement(E.a,null,r.a.createElement(O.a,{onClick:function(){return le(t)}},Y===t?r.a.createElement("b",null,t):t),ee.map((function(a){var o=n.members[a].completion_day_level[t]||{},l=(o[1]||{}).get_star_ts,c=(o[2]||{}).get_star_ts;return r.a.createElement(O.a,{className:e.vData},M(k(re,l,t)),r.a.createElement("br",null),M(k(re,c,t)),r.a.createElement("br",null),ie&&l&&c&&M(c-l))})))})))):"No data":r.a.createElement(p.a,{pl:4},r.a.createElement("pre",null,r.a.createElement("br",null),r.a.createElement("br",null),"Your sessionId is missing or invalid.",r.a.createElement("br",null),"The sessionId is the 'session' cookie used by the AoC site to identify you.",r.a.createElement("br",null),"To get it:",r.a.createElement("br",null),"- Open developer tools",r.a.createElement("br",null),"- Switch to the network tab",r.a.createElement("br",null),"- Filter for 'advent'",r.a.createElement("br",null),"- Open the https://adventofcode.com/ page",r.a.createElement("br",null),"- Look for the request in the network tab with name 'adventofcode.com' and click on it",r.a.createElement("br",null),"- Look for 'cookie:' in the 'Request Headers' section",r.a.createElement("br",null),"- You will see something like 'session=851de75753d31b6fbcfa00fe44d87dfea738f8d6ed5318bd5e1c2f6b7a9f116203403013d6466cbc2768048ac73e51b8'",r.a.createElement("br",null),"- Copy the hexadecimal number into the sessionId field",r.a.createElement("br",null),"- Be happy now!",r.a.createElement("br",null),r.a.createElement("br",null),"NOTE: We cache your sessionId in the browser's localStorage for convenience, so you only have to provide it once. It auto-expires after a month (according to AoC site)")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){e.exports=a(106)},80:function(e,t,a){},82:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.c0e43fde.chunk.js.map